<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category   design_blank
 * @package    Mage
 * @copyright  Copyright (c) 2008 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license    http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<div class="page-header">
    <h2 class="pageheader"><?php echo $this->__('search results');?></h2>
</div>
<div class="search-form">
    <?php echo $this->getChildHtml('form'); ?>
</div>
<?php if($this->getResultCount()): ?>
    <h3>
        <?php echo $this->__("Search results for '%s':", $this->getEscapedQueryText()) ?>
        <?php if($this->getResultCount()>1): ?>
            <?php echo $this->__("%d hits.", $this->getResultCount()); ?>
        <?php else: ?>
            <?php echo $this->__("1 hit."); ?>
        <?php endif; ?>
    </h3>
    <?php foreach($this->getResults() as $result): ?>
        <div class="search-result">
            <?php if($result->getImage()): ?>
                <div class="result-image">
                    <img
                        src="<?php echo $result->getImage(); ?>"
                        alt="<?php echo $result->getName()?>"
                        title="<?php echo $result->getName()?>"
                        class="result-image"
                    />
                </div>
            <? endif; ?>
            <h4>
                <a href="<?php echo $result->getUrl(); ?>">
                    <?php echo $result->getName(); ?>
                </a>
            </h4>
            <p>
                <?php echo str_replace(
                    $this->getEscapedQueryText(),
                    '<strong>'.$this->getEscapedQueryText().'</strong>',
                    substr($result->getShortContent(),0,300)
                ); ?>
                ...
                <a href="<?php echo $result->getUrl(); ?>">
                    <?php echo $this->__('more');?>
                </a>
            </p>
            <a href="<?php echo $result->getUrl(); ?>">
                <?php echo $result->getUrl();?>
            </a>
        </div>
    <?php endforeach; ?>
<?php else: ?>
    <h3><?php echo $this->__("There is no page machting your search for '%s'", $this->getEscapedQueryText()) ?></h2>
<?php endif; ?>
